<html>
  <head>
    <meta content='Distraction and Genius - Tinker's thoughts~' property='og:title' />
    <title>Distraction and Genius - Tinker's thoughts~</title>
    <link href='/images/fav.png' rel='shortcut icon'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css' />
<link href='/stylesheets/style.css' rel='stylesheet' type='text/css' />
<link href='/stylesheets/syntax.css' rel='stylesheet' type='text/css' />
<link href='/stylesheets/responsive.css' rel='stylesheet' type='text/css' />
<link href='/stylesheets/custom.css' rel='stylesheet' type='text/css' />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link href='/stylesheets/all-2751ab1d048569196037b7afce0ca9bb.css' media='all' rel='stylesheet' type='text/css'>
<!-- - -->
<script src='/javascripts/jquery.js' type='text/javascript'></script>
<script src='/javascripts/pd.js' type='text/javascript'></script>
<script src='/javascripts/basics.js' type='text/javascript'></script>
<script src='/javascripts/custom.js' type='text/javascript'></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<!-- - -->
<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
<meta content='text/html; charset=utf-8' http-equiv='content-type' />
<meta content="/og.png" property="og:image" />
<meta content="164540446948" property="fb:app_id" />

  <meta content='/thoughts/2013/05/21/distraction-and-genius/' property='og:url' />
  <meta content="Sometimes we always wonder if it's a good thing to get distracted. When we are working on something important getting..." property='og:description' />
  <meta content="article" property="og:type" />

<!-- - -->
<script type='text/javascript'>
  //<![CDATA[
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-47839614-1']);
    _gaq.push(['_trackPageview']);
    
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  //]]>
</script>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=164540446948";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
  </head>
  <body>
    <header>
<!-- <a id="go-back-home" href=""><img src="/images/scribble.png" alt="scribble" width="53" height="59"></a> -->
<a id="go-back-home" href="/"><i class="fa fa-code-fork fa-5x"></i></a>
<p>Tinker's thoughts~</p>
</header>
    <div id='container'>
      <div class="block">
  
    <a target="_top"
       class="main" 
       href="/about">
       About
     </a>
  
    <a target="_top"
       class="main" 
       href="/blog">
       Blog
     </a>
  
    <a target="_blank"
       class="main" 
       href="http://github.com/dulichan">
       GitHub
     </a>
  
</div>
      <section class="paging">
  
    <div class="left">
      <a href="/arduino/2013/05/18/playing-binary-dice-with-arduino/">
        ‹
      </a>
    </div>
  
  
    <div class="right">
      <a href="/javascript/2013/06/05/simple-mvc-for-jaggeryjs/">
        ›
      </a>
    </div>
  
</section>
      <div class="content">
        <section class='post'>
          <h1 class="upcase">
            <div class='date'>21 May 2013</div>
            Distraction and Genius
          </h1>
          <p>Sometimes we always wonder if it&rsquo;s a good thing to get distracted. When we are working on something important getting distracted is always annoying when we are doing something important. While I was writing this post I was getting chat pings from a friend of mine with Viber and I found it very distracting. </p>

<h1>Distraction as Innovative juice</h1>

<p>But I think distraction is positive. Distraction allows us to feed new ideas into our heads. It allows us to be innovative, be more human. Every invention out there was created from man&rsquo;s distractions. Distraction allows humans who are focused on a single task to get a grasp of a different approach, a different direction.</p>

<h2>Light bulb</h2>

<p>I am pretty sure Edison got the idea of a light bulb from a candle. And the idea for Candle was from the Sun or Fire. Human&rsquo;s observe nature - workings of nature and innovate new concepts and designs and ultimately new inventions.</p>

<h2>Productive way of distraction</h2>

<p>For example we are developing on a javascript development environment called JaggeryJS. It&rsquo;s similar to NodeJS but it runs on Java (Rhino-based). We were writing code which looked a lot ugly and I thought why not use something like in Sinatra.</p>

<h3>Previous style</h3>

<figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>previousstyle.js</span><a class='code-highlight-caption-link' href='https://gist.github.com/62f3d49d1fe40a11b4c7'>link</a></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="o">&lt;%</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="c1">//The Coffeeshop example</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="nx">include</span><span class="p">(</span><span class="s2">&quot;../model/orderQuery.jag&quot;</span><span class="p">);</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="nx">response</span><span class="p">.</span><span class="nx">contentType</span> <span class="o">=</span> <span class="s1">&#39;text/javascript&#39;</span><span class="p">;</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kd">var</span> <span class="nx">verb</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getMethod</span><span class="p">();</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kd">var</span> <span class="nx">orderid</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getParameter</span><span class="p">(</span><span class="s1">&#39;orderid&#39;</span><span class="p">);</span>
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kd">var</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getParameter</span><span class="p">(</span><span class="s1">&#39;order&#39;</span><span class="p">);</span>
</div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kd">var</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getParameter</span><span class="p">(</span><span class="s1">&#39;status&#39;</span><span class="p">);</span>
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kd">var</span> <span class="nx">addition</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getParameter</span><span class="p">(</span><span class="s1">&#39;addition&#39;</span><span class="p">);</span>
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getContent</span><span class="p">();</span>
</div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kd">var</span> <span class="nx">log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Log</span><span class="p">();</span>
</div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kd">var</span> <span class="nx">uri</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">getRequestURI</span><span class="p">();</span>
</div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="nx">uri</span> <span class="o">=</span> <span class="nx">uri</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">getContextPath</span><span class="p">().</span><span class="nx">length</span><span class="p">);</span>
</div></div><div data-line='17' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">if</span><span class="p">(</span><span class="nx">uri</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='18' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="kd">var</span> <span class="nx">uriMatcher</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URIMatcher</span><span class="p">(</span><span class="nx">uri</span><span class="p">);</span>
</div></div><div data-line='19' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='20' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="k">if</span><span class="p">(</span><span class="nx">uriMatcher</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s2">&quot;/orders/&#x7b;orderid&#x7d;/&#x7b;page&#x7d;&quot;</span><span class="p">))</span> <span class="p">&#x7b;</span>
</div></div><div data-line='21' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="nx">orderid</span> <span class="o">=</span> <span class="nx">uriMatcher</span><span class="p">.</span><span class="nx">elements</span><span class="p">().</span><span class="nx">orderid</span><span class="p">;</span>
</div></div><div data-line='22' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="p">&#x7d;</span>
</div></div><div data-line='23' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="k">if</span><span class="p">(</span><span class="nx">uriMatcher</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="s2">&quot;/orders/&#x7b;orderid&#x7d;/&quot;</span><span class="p">))</span> <span class="p">&#x7b;</span>
</div></div><div data-line='24' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="nx">orderid</span> <span class="o">=</span> <span class="nx">uriMatcher</span><span class="p">.</span><span class="nx">elements</span><span class="p">().</span><span class="nx">orderid</span><span class="p">;</span>
</div></div><div data-line='25' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="p">&#x7d;</span>
</div></div><div data-line='26' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">&#x7d;</span>
</div></div><div data-line='27' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='28' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">if</span><span class="p">(</span><span class="nx">data</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='29' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="nx">data</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</div></div><div data-line='30' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">addition</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='31' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="nx">addition</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">addition</span><span class="p">;</span>
</div></div><div data-line='32' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="p">&#x7d;</span>
</div></div><div data-line='33' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="k">if</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='34' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="nx">status</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
</div></div><div data-line='35' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="p">&#x7d;</span>
</div></div><div data-line='36' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">&#x7d;</span>
</div></div><div data-line='37' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='38' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">if</span><span class="p">(</span><span class="nx">verb</span> <span class="o">==</span> <span class="s2">&quot;DELETE&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">orderid</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='39' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="nx">deleteOrder</span><span class="p">(</span><span class="nx">orderid</span><span class="p">);</span>
</div></div><div data-line='40' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='41' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">&#x7d;</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">verb</span> <span class="o">==</span> <span class="s2">&quot;GET&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">orderid</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">addition</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">status</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='42' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="nx">viewOrder</span><span class="p">(</span><span class="nx">orderid</span><span class="p">);</span>
</div></div><div data-line='43' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='44' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">&#x7d;</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">verb</span> <span class="o">==</span> <span class="s2">&quot;PUT&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">orderid</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">addition</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">&#x7b;</span>   
</div></div><div data-line='45' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="nx">addAddition</span><span class="p">(</span><span class="nx">orderid</span><span class="p">,</span> <span class="nx">addition</span><span class="p">);</span>
</div></div><div data-line='46' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='47' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">&#x7d;</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">verb</span> <span class="o">==</span> <span class="s2">&quot;PUT&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">orderid</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">status</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='48' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="nx">updateStatus</span><span class="p">(</span><span class="nx">orderid</span><span class="p">,</span> <span class="nx">status</span><span class="p">);</span>
</div></div><div data-line='49' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='50' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">&#x7d;</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">verb</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">order</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='51' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="nx">addOrder</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
</div></div><div data-line='52' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='53' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">&#x7d;</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">verb</span> <span class="o">==</span> <span class="s2">&quot;GET&quot;</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='54' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="nx">listAllOrders</span><span class="p">();</span>
</div></div><div data-line='55' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="p">&#x7d;</span>
</div></div><div data-line='56' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='57' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='58' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='59' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="o">%&gt;</span></div></div></pre></div></figure>

<h3>New Sinatra-type style</h3>

<figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>gistfile1.js</span><a class='code-highlight-caption-link' href='https://gist.github.com/62f3d49d1fe40a11b4c7'>link</a></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="o">&lt;%</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="c1">// Temporarly including dbconnection</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="nx">include</span><span class="p">(</span><span class="s2">&quot;/model/dbcon.jag&quot;</span><span class="p">);</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="kd">var</span> <span class="nx">log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Log</span><span class="p">();</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="kd">var</span> <span class="nx">Router</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;router.js&#39;</span><span class="p">).</span><span class="nx">Router</span><span class="p">;</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="kd">var</span> <span class="nx">jbj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Router</span><span class="p">(</span><span class="s1">&#39;/MDMServer1.1/&#39;</span><span class="p">);</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="nx">jbj</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;users/&#x7b;userid&#x7d;|GET&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)&#x7b;</span>
</div></div><div data-line='10' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;select * from Users where id=&quot;</span><span class="o">+</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">userid</span><span class="p">);</span>
</div></div><div data-line='11' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="k">if</span><span class="p">(</span><span class="nx">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="kc">null</span><span class="p">)&#x7b;</span>
</div></div><div data-line='12' class='code-highlight-row numbered'><div class='code-highlight-line'>          <span class="nx">response</span><span class="p">.</span><span class="nx">content</span> <span class="o">=</span> <span class="nx">result</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</div></div><div data-line='13' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
</div></div><div data-line='14' class='code-highlight-row numbered'><div class='code-highlight-line'>        <span class="p">&#x7d;</span><span class="k">else</span><span class="p">&#x7b;</span>
</div></div><div data-line='15' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="mi">404</span><span class="p">;</span>
</div></div><div data-line='16' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="p">&#x7d;</span>
</div></div><div data-line='17' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="p">&#x7d;);</span>
</div></div><div data-line='18' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="nx">jbj</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;users/&#x7b;userid&#x7d;/groups|PUT&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)&#x7b;</span>
</div></div><div data-line='19' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;DELETE FROM UserGroups where user_id=&quot;</span><span class="o">+</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">userid</span><span class="p">);</span>
</div></div><div data-line='20' class='code-highlight-row numbered'><div class='code-highlight-line'>           <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">groups</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">&#x7b;</span>
</div></div><div data-line='21' class='code-highlight-row numbered'><div class='code-highlight-line'>               <span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">groups</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
</div></div><div data-line='22' class='code-highlight-row numbered'><div class='code-highlight-line'>               <span class="nx">db</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;INSERT INTO UserGroups(user_id, group_id) VALUES(&quot;</span><span class="o">+</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">userid</span><span class="o">+</span><span class="s2">&quot;,&quot;</span><span class="o">+</span><span class="nx">group</span><span class="o">+</span><span class="s2">&quot;)&quot;</span><span class="p">);</span>
</div></div><div data-line='23' class='code-highlight-row numbered'><div class='code-highlight-line'>       <span class="p">&#x7d;</span>
</div></div><div data-line='24' class='code-highlight-row numbered'><div class='code-highlight-line'>        <span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
</div></div><div data-line='25' class='code-highlight-row numbered'><div class='code-highlight-line'>        <span class="nx">print</span><span class="p">(</span><span class="s2">&quot;User assigned Successfully&quot;</span><span class="p">);</span>
</div></div><div data-line='26' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="p">&#x7d;);</span>
</div></div><div data-line='27' class='code-highlight-row numbered'><div class='code-highlight-line'> </div></div><div data-line='28' class='code-highlight-row numbered'><div class='code-highlight-line'> <span class="c1">//Process all the routes against the current request</span>
</div></div><div data-line='29' class='code-highlight-row numbered'><div class='code-highlight-line'>   <span class="nx">jbj</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">request</span><span class="p">);</span>
</div></div><div data-line='30' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="o">%&gt;</span></div></div></pre></div></figure>

<p>So how did I get to the idea of using such a neat style for defining REST-apis in JaggeryJS? Well my love for new technologies got me to work on Sinatra, Redis, NodeJS and many more. Sinatra was my inspiration since it has neat routing that is just gorgeous. </p>

<figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Sinatra-style</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="n">get</span> <span class="s1">&#39;/users&#39;</span> <span class="k">do</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="c1"># get a listing of all the users</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">end</span></div></div></pre></div></figure>

<p>I just now witnessed another great thing of distraction. I wanted to learn new programming languages after playing with Java for years. Ruby was one of my favorites cause you can even talk Ruby code :D. I am using Octopress for this blog and I had an issue with posting the above gist code snippets. The problem was in the regex expression used in the code. </p>

<figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Having a bug</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="k">if</span> <span class="n">parts</span> <span class="o">=</span> <span class="vi">@text</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/([\d]*) (.*)/</span><span class="p">)</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="n">gist</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">strip</span><span class="p">,</span> <span class="n">parts</span><span class="o">[</span><span class="mi">2</span><span class="o">].</span><span class="n">strip</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="n">script_url</span> <span class="o">=</span> <span class="n">script_url_for</span> <span class="n">gist</span><span class="p">,</span> <span class="n">file</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="n">code</span>       <span class="o">=</span> <span class="n">get_cached_gist</span><span class="p">(</span><span class="n">gist</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span> <span class="o">||</span> <span class="n">get_gist_from_web</span><span class="p">(</span><span class="n">gist</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="n">html_output_for</span> <span class="n">script_url</span><span class="p">,</span> <span class="n">code</span>
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="k">else</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="s2">&quot;&quot;</span>
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="k">end</span></div></div></pre></div></figure>

<p>Since I was familiar with Ruby I got the bug figured and fixed - </p>

<figure class='code-highlight-figure'><figcaption class='code-highlight-caption'><span class='code-highlight-caption-title'>Bug free</span></figcaption><div class='code-highlight'><pre class='code-highlight-pre'><div data-line='1' class='code-highlight-row numbered'><div class='code-highlight-line'><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</div></div><div data-line='2' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="k">if</span> <span class="n">parts</span> <span class="o">=</span> <span class="vi">@text</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sr">/([\w]*) (.*)/</span><span class="p">)</span>
</div></div><div data-line='3' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="n">gist</span><span class="p">,</span> <span class="n">file</span> <span class="o">=</span> <span class="n">parts</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">strip</span><span class="p">,</span> <span class="n">parts</span><span class="o">[</span><span class="mi">2</span><span class="o">].</span><span class="n">strip</span>
</div></div><div data-line='4' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="n">script_url</span> <span class="o">=</span> <span class="n">script_url_for</span> <span class="n">gist</span><span class="p">,</span> <span class="n">file</span>
</div></div><div data-line='5' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="n">code</span>       <span class="o">=</span> <span class="n">get_cached_gist</span><span class="p">(</span><span class="n">gist</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span> <span class="o">||</span> <span class="n">get_gist_from_web</span><span class="p">(</span><span class="n">gist</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
</div></div><div data-line='6' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="n">html_output_for</span> <span class="n">script_url</span><span class="p">,</span> <span class="n">code</span>
</div></div><div data-line='7' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="k">else</span>
</div></div><div data-line='8' class='code-highlight-row numbered'><div class='code-highlight-line'>    <span class="s2">&quot;&quot;</span>
</div></div><div data-line='9' class='code-highlight-row numbered'><div class='code-highlight-line'>  <span class="k">end</span></div></div></pre></div></figure>

<p>Having a good grasp and knowledge of different sectors of technology allows oneself to be lot better. We get a good understanding of different paradigms used and how those can help solve our problems. </p>

<p>Update :- The above bug I found was regarding sharing private gists. So if the gist is public the original code will work fine as well.</p>

          <br />
<p>
  Till next time mate,<br/>
  Dulitha
  <span class="muted">at 22:46</span>
</p>


        </section>
      </div>
      

      
      <div class="block">
  
    <a target="_top"
       class="main" 
       href="/about">
       About
     </a>
  
    <a target="_top"
       class="main" 
       href="/blog">
       Blog
     </a>
  
    <a target="_blank"
       class="main" 
       href="http://github.com/dulichan">
       GitHub
     </a>
  
</div>
    </div>
    <footer>
  <p>~Code is Poetry~</p>
  <a id="go-back-home" href=""><i class="fa fa-code-fork fa-2x"></i></a>
</footer>
  </body>
</html>
